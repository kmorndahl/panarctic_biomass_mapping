################################################################################
################################################################################

# DESCRIPTION:

# This script creates a biomass/elevation transect figure

# AUTHOR: Kathleen Orndahl
# DATE: 12-4-2024

################################################################################
################################################################################

# ==============================================================================
# 1. SET UP ====================================================================
# ==============================================================================

# 1.1 Packages -----------------------------------------------------------------

library(ggplot2)

# 1.2 Parameters ---------------------------------------------------------------

in_dir = 'output/15_gee_output/topography/'
out_dir = 'output/17_figures/'

# 1.3 Read in data -------------------------------------------------------------

topo = read.csv(paste0(in_dir, 'biomass_elev_transect_fc_ural.csv'))

# ==============================================================================
# 2. PLOT ======================================================================
# ==============================================================================

topo = topo[topo$elevation<=400,] # Remove long tail of zero biomass

plt = ggplot(topo, aes(x = elevation, y = plant_biomass_gm2))+
  geom_point(size = 12, color = 'magenta')+
  geom_smooth(color = 'magenta', se = FALSE, lwd = 6)+
  theme_minimal(base_size = 65)+
  labs(x = 'Elevation (m)', y = expression(paste('Biomass (g ', m^-2, ')')))+
  theme(plot.margin = margin(t = 80, r = 30, b = 5.5, l = 5.5, unit = "pt"))
plt

# ==============================================================================
# 3. SAVE ======================================================================
# ==============================================================================

ggsave(
  paste0(out_dir, 'biomass_elev_transect_fc_ural.jpg'),
  plt,
  width = 30,
  height = 20,
  units = 'cm',
  bg = 'white',
  dpi = 600
)